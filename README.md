# üîã Battery Status - Cloudflare Pages Edition

–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä—ñ–≤–Ω—ñ–≤ –∑–∞—Ä—è–¥—É –±–∞—Ç–∞—Ä–µ–π Deye —á–µ—Ä–µ–∑ Cloudflare Pages + Functions.

## üöÄ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ‚ö° **Serverless** - –ø—Ä–∞—Ü—é—î –Ω–∞ Cloudflare Edge
- üíæ **KV –ö–µ—à—É–≤–∞–Ω–Ω—è** - –º—ñ–Ω—ñ–º—É–º –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ DeyeCloud
- üì± **PWA** - –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —è–∫ –¥–æ–¥–∞—Ç–æ–∫
- üåô **–¢–µ–º–Ω–∞ —Ç–µ–º–∞** - –∑–±–µ—Ä–µ–∂–∞—î—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
- üîÑ **–û—Ñ–ª–∞–π–Ω –ø—ñ–¥—Ç—Ä–∏–º–∫–∞** - Service Worker –∫–µ—à—É—î –¥–∞–Ω—ñ

## üìä –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤

–ë–µ—Å–ø–ª–∞—Ç–Ω–∏–π –ø–ª–∞–Ω Cloudflare Workers: **100,000 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å**

### –Ø–∫ –º–∏ –µ–∫–æ–Ω–æ–º–∏–º–æ:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß–∞—Å –∫–µ—à—É | –ï–∫–æ–Ω–æ–º—ñ—è |
|-----------|----------|----------|
| **KV Storage (—Å–µ—Ä–≤–µ—Ä)** | 5 —Ö–≤–∏–ª–∏–Ω | –û–¥–∏–Ω –∑–∞–ø–∏—Ç –¥–æ Deye –Ω–∞ 5 —Ö–≤ –∑–∞–º—ñ—Å—Ç—å –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É |
| **LocalStorage (–±—Ä–∞—É–∑–µ—Ä)** | 5 —Ö–≤–∏–ª–∏–Ω | –£–º–æ–≤–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ API |
| **Service Worker** | –û—Ñ–ª–∞–π–Ω | –ü—Ä–∞—Ü—é—î –±–µ–∑ –º–µ—Ä–µ–∂—ñ |
| **HTTP Cache-Control** | 5 —Ö–≤–∏–ª–∏–Ω | CDN –∫–µ—à—É–≤–∞–Ω–Ω—è |

### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:
- –û–¥–∏–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á: ~288 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å (–∫–æ–∂–Ω—ñ 5 —Ö–≤)
- 10 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: ~288 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å (KV –∫–µ—à!)
- **–î–æ 345 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ** –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º—É –ø–ª–∞–Ω—ñ

## üõ† –î–µ–ø–ª–æ–π

### 1. –°—Ç–≤–æ—Ä—ñ—Ç—å Cloudflare Pages –ø—Ä–æ–µ–∫—Ç

```bash
# –Ø–∫—â–æ —â–µ –Ω–µ –º–∞—î—Ç–µ wrangler
npm install -g wrangler

# –õ–æ–≥—ñ–Ω
wrangler login

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Pages –ø—Ä–æ–µ–∫—Ç—É
wrangler pages project create battery-status
```

### 2. –°—Ç–≤–æ—Ä—ñ—Ç—å KV Namespace –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è

```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è KV namespace
wrangler kv:namespace create "DEYE_CACHE"

# –ó–∞–ø–∞–º'—è—Ç–∞–π—Ç–µ ID –∑ –≤–∏–≤–æ–¥—É!
```

### 3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Environment Variables

–í Cloudflare Dashboard ‚Üí Pages ‚Üí battery-status ‚Üí Settings ‚Üí Environment Variables:

| Variable | Value | Type |
|----------|-------|------|
| `DEYE_APP_ID` | –í–∞—à AppId –∑ developer.deyecloud.com | Plain |
| `DEYE_APP_SECRET` | –í–∞—à AppSecret | **Secret** |
| `DEYE_EMAIL` | Email DeyeCloud –∞–∫–∞—É–Ω—Ç—É | Plain |
| `DEYE_PASSWORD` | –ü–∞—Ä–æ–ª—å | **Secret** |
| `DEYE_REGION` | `EU` –∞–±–æ `US` | Plain |

### 4. –ü—Ä–∏–≤'—è–∂—ñ—Ç—å KV Namespace

Pages ‚Üí Settings ‚Üí Functions ‚Üí KV namespace bindings:
- Variable name: `DEYE_CACHE`
- KV namespace: –≤–∏–±—Ä–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π

### 5. –î–µ–ø–ª–æ–π

```bash
# –î–µ–ø–ª–æ–π –∑ –ª–æ–∫–∞–ª—å–Ω–æ—ó –ø–∞–ø–∫–∏
wrangler pages deploy ./ --project-name=battery-status
```

–ê–±–æ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—é.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
status-deye-cf/
‚îú‚îÄ‚îÄ index.html          # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îú‚îÄ‚îÄ manifest.json       # PWA manifest  
‚îú‚îÄ‚îÄ sw.js              # Service Worker
‚îú‚îÄ‚îÄ icon-192.png       # PWA —ñ–∫–æ–Ω–∫–∞
‚îú‚îÄ‚îÄ icon-512.png       # PWA —ñ–∫–æ–Ω–∫–∞
‚îú‚îÄ‚îÄ wrangler.toml      # Cloudflare –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ functions/         # Cloudflare Functions
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îî‚îÄ‚îÄ battery.js # API endpoint
‚îî‚îÄ‚îÄ README.md
```

## üîß –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
npm install -g wrangler

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
wrangler pages dev ./ --kv=DEYE_CACHE

# –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:8788
```

## üîê –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ Credentials –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Cloudflare (–Ω–µ –≤ –∫–æ–¥—ñ)
- ‚úÖ –°–µ–∫—Ä–µ—Ç–Ω—ñ –¥–∞–Ω—ñ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ —è–∫ Secret
- ‚úÖ –ü–∞—Ä–æ–ª—ñ —Ö–µ—à—É—é—Ç—å—Å—è SHA256 –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é
- ‚úÖ CORS –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π

## üìà –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

Cloudflare Dashboard ‚Üí Pages ‚Üí Analytics:
- –ü–µ—Ä–µ–≥–ª—è–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤
- –ü–µ—Ä–µ–≥–ª—è–¥ –ø–æ–º–∏–ª–æ–∫
- –ì–µ–æ–≥—Ä–∞—Ñ—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

## üÜò –í—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

1. **API –Ω–µ –ø—Ä–∞—Ü—é—î**: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Environment Variables –≤ Dashboard
2. **–ö–µ—à –Ω–µ –ø—Ä–∞—Ü—é—î**: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ KV binding –≤ Settings ‚Üí Functions
3. **401 –ø–æ–º–∏–ª–∫–∞**: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ credentials DeyeCloud
4. **–î–∞–Ω—ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ**: –û—á–∏—Å—Ç—ñ—Ç—å KV —á–µ—Ä–µ–∑ Dashboard

## üìã –†—ñ–∑–Ω–∏—Ü—è –∑ PHP –≤–µ—Ä—Å—ñ—î—é

| –ê—Å–ø–µ–∫—Ç | PHP –≤–µ—Ä—Å—ñ—è | Cloudflare –≤–µ—Ä—Å—ñ—è |
|--------|------------|-------------------|
| –•–æ—Å—Ç–∏–Ω–≥ | –ë—É–¥—å-—è–∫–∏–π –∑ PHP | Cloudflare Pages |
| –ö–µ—à | –§–∞–π–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ | Cloudflare KV |
| –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è | –û–±–º–µ–∂–µ–Ω–µ | –ì–ª–æ–±–∞–ª—å–Ω–µ CDN |
| –í–∞—Ä—Ç—ñ—Å—Ç—å | –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ö–æ—Å—Ç–∏–Ω–≥—É | –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ* |
| –®–≤–∏–¥–∫—ñ—Å—Ç—å | –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞ | Edge (~50ms) |

*–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–æ 100,000 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å

---

**–í–µ—Ä—Å—ñ—è**: 2.0.0 (Cloudflare Edition)
